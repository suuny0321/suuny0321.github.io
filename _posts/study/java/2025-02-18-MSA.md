---
layout: post
title:  "[MSA] 마이크로서비스 아키텍처(MSA)에서 모듈 간 통신 방법 이해하기 "
sitemap: false
description: >
  MSA
categories: [study,java]
---
 * toc
  {:toc}

## MSA란?

마이크로서비스 아키텍처(MSA)는 하나의 큰 애플리케이션을 여러 개의 독립적인 서비스로 분리하여 개발하는 아키텍처 방식입니다. 각 서비스는 독립적으로 배포되고 확장될 수 있으며, 서로 다른 기술 스택을 사용할 수 있습니다.

## 모놀리식 아키텍처와 MSA 비교

### 모놀리식 서비스 아키텍처
- 하나의 서버에 모든 기능이 통합
- **장점**
  - 단순한 구조로 관리 용이
  - 초기 개발 속도가 빠름
- **단점**
  - 에러 원인 파악이 어려움
  - 전체 서비스 장애 가능성이 높음
  - 서비스 간 높은 결합도
  - 
### 마이크로 서비스 아키텍처(MSA)

### MSA로의 전환 필요성
1. **장애 격리**
  - 개별 서비스 장애가 전체에 영향 최소화
  - 넷플릭스 사례: 일부 서비스 다운 시에도 전체 서비스 운영 가능

2. **운영의 독립성**
  - 각 서비스별 독립적 운영
  - 신속한 문제 파악과 해결

##  MSA 통신 방식

###  HTTP/REST 통신
- **특징**
  - 요청-응답 구조 (전화와 유사)
  - 동기식 통신
  - 1:1 통신
- **사용 시나리오**
  - 즉각적인 응답이 필요한 경우
  - 단순한 데이터 교환 시

### 메시지 큐 시스템 (Kafka/RabbitMQ)
- **특징**
  - 비동기 단방향 통신
  - 1:N 통신 가능
  - 메시지 이력 보관
- **구성 요소**
  - 토픽(단톡방): 메시지가 모이는 공간
  - 프로듀서: 메시지 생성자
  - 컨슈머: 메시지 수신자

## 데이터 일관성과 통신 전략

### 하이브리드 통신 전략
- **상황별 최적 통신 방식**
  - 실시간 데이터 조회: HTTP/REST
  - 이벤트 기반 업데이트: Kafka
  - 복잡한 비즈니스 처리: gRPC

### 데이터 동기화
- **분산 트랜잭션 처리**
  - SAGA 패턴 활용
  - 보상 트랜잭션 구현
- **이벤트 소싱**
  - 상태 변경 이력 관리
  - 데이터 정합성 보장

## 실제 구현 시 고려사항

### 서비스 규모에 따라 적합하게 선택
- **소규모**
  - 모놀리식 구조 적합
  - 간단한 HTTP 통신으로 충분
- **대규모**
  - MSA 구조 권장
  - 다양한 통신 방식 조합 필요

### 운영 비용 고려사항
- 초기 구축 비용
- 관리 복잡성
- 인프라 요구사항

